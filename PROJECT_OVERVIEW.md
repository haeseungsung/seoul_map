# Seoul Open Data Map - ν”„λ΅μ νΈ μ „μ²΄ κ°μ”

**μ‘μ„±μΌ**: 2026-01-12
**λ©μ **: ν”„λ΅μ νΈ μ΄ν•΄λ¥Ό μ„ν• ν•µμ‹¬ κ°λ… μ •λ¦¬

---

## π“ μ΄ λ¬Έμ„λ¶€ν„° μ½μΌμ„Έμ”

μ΄ ν”„λ΅μ νΈλ” **μ„μΈμ‹ μ—΄λ¦°λ°μ΄ν„°κ΄‘μ¥μ 8,212κ° API**λ¥Ό μ§€λ„μ— μ‹κ°ν™”ν•λ” μ‹μ¤ν…μ…λ‹λ‹¤.

---

## π― ν”„λ΅μ νΈ λ©ν‘

1. **μ„μΈμ‹ μ¤ν” API ν†µν•©**: 8,212κ°μ XML κΈ°λ° APIλ¥Ό ν•λ‚μ μΈν„°νμ΄μ¤λ΅ μ κ³µ
2. **κ³„μΈµν• νƒμƒ‰**: 40κ° μ£Όμ  β†’ μ„Έλ¶€ μ§€ν‘λ΅ κµ¬μ΅°ν™”λ νƒμƒ‰ κ²½ν—
3. **μ§€λ„ μ‹κ°ν™”**: κµ¬λ³„/ν–‰μ •λ™λ³„ λ°μ΄ν„°λ¥Ό choropleth μ§€λ„λ΅ ν‘μ‹
4. **μ‹¤μ‹κ°„ λ°μ΄ν„°**: CSV μ •μ  λ°μ΄ν„° + API μ‹¤μ‹κ°„ λ°μ΄ν„° λ³‘ν–‰ μ§€μ›

---

## π—‚οΈ ν•µμ‹¬ κ°λ… μ„¤λ…

### 1. LOCALDATAλ€?

**LOCALDATA**λ” μ„μΈμ‹μ—μ„ μ κ³µν•λ” **μ§€μ—­μΈκ°€λ°μ΄ν„° API μ„λΉ„μ¤λ… ν¨ν„΄**μ…λ‹λ‹¤.

#### λ…λ… κ·μΉ™
```
LOCALDATA_[μ—…μΆ…μ½”λ“]_[κµ¬μ½”λ“]
```

#### μμ‹
- `LOCALDATA_010101_GN`: **κ°•λ‚¨κµ¬(GN)**μ **λ³‘μ›(010101)** μΈν—κ°€ μ •λ³΄
- `LOCALDATA_070101_SP`: **μ„μ΄κµ¬(SP)**μ **μΌλ°μμ‹μ (070101)** μΈν—κ°€ μ •λ³΄
- `LOCALDATA_020101_GD`: **κ°•λ™κµ¬(GD)**μ **μ•½κµ­(020101)** μΈν—κ°€ μ •λ³΄

#### μ—…μΆ… μ½”λ“ (Industry Codes)
| μ½”λ“ | μ—…μΆ…λ… |
|------|--------|
| 010101 | λ³‘μ› |
| 070101 | μΌλ°μμ‹μ  |
| 020101 | μ•½κµ­ |
| 070102 | ν΄κ²μμ‹μ  |
| 110101 | μ ν†µμ „λ¬Ένλ§¤μ—… |

#### κµ¬ μ½”λ“ (District Codes)
| μ½”λ“ | κµ¬ μ΄λ¦„ |
|------|---------|
| GN | κ°•λ‚¨κµ¬ |
| GD | κ°•λ™κµ¬ |
| GJ | κ΄‘μ§„κµ¬ |
| SP | μ„μ΄κµ¬ |
| YD | μλ“±ν¬κµ¬ |
| ... | (25κ° κµ¬ μ „μ²΄) |

#### νΉμ§•
- **κ° κµ¬λ³„λ΅ λ³„λ„ API μ΅΄μ¬**: κ°•λ‚¨κµ¬ λ³‘μ› API, κ°•λ™κµ¬ λ³‘μ› API λ“± 25κ° API μ΅΄μ¬
- **XML μ‘λ‹µ**: `<list_total_count>`, `<row>` κµ¬μ΅°
- **μ§€μ—­μΈκ°€λ°μ΄ν„°**: μΈν—κ°€, μμ—…μ¤‘, νμ—… λ“± ν–‰μ • μ •λ³΄

---

### 2. λ°μ΄ν„° μ†μ¤ 3κ°€μ§€ μ ν•

#### Type 1: CSV (LOCALDATA μ •μ  λ°μ΄ν„°)
- **νμΌ μ„μΉ**: `public/data/indicator-catalog.csv`
- **νΉμ§•**: μ΄λ―Έ μμ§‘λ 25κ° κµ¬μ λ°μ΄ν„° (ν–‰μ •λ™ λ λ²¨)
- **μ‚¬μ© λ¨λ“**: "ν–‰μ •λ™ (CSV)" λ¨λ“
- **μμ‹**: μ ν†µμ „λ¬Ένλ§¤μ—…_μ „μ²΄, μ ν†µμ „λ¬Ένλ§¤μ—…_μμ—…μ¤‘, μ ν†µμ „λ¬Ένλ§¤μ—…_νμ—…

#### Type 2: LOCALDATA API (κµ¬λ³„ μΈν—κ°€ λ°μ΄ν„°)
- **API ν¨ν„΄**: `LOCALDATA_[μ—…μΆ…μ½”λ“]_[κµ¬μ½”λ“]`
- **νΉμ§•**: κ° κµ¬λ³„λ΅ λ³„λ„ API νΈμ¶ ν•„μ” (25κ° κµ¬ = 25λ² νΈμ¶)
- **μ‚¬μ© λ¨λ“**: "κµ¬ (API)" λ¨λ“
- **ν†µν•© λ°©μ‹**:
  - `/api/localdata-merge?industryCode=010101` β†’ 25κ° κµ¬ λ°μ΄ν„°λ¥Ό ν• λ²μ— κ°€μ Έμ΄
  - `aggregateByGu()` ν•¨μλ΅ κµ¬λ³„λ΅ μ§‘κ³„

#### Type 3: κΈ°νƒ€ μ„μΈ OpenAPI (μ‹¤μ‹κ°„ λ°μ΄ν„°)
- **API μΆ…λ¥**:
  - λ‹¨μΌ APIκ°€ 25κ° κµ¬ λ°μ΄ν„° λ°ν™ (μ: `RealtimeCityAir` - μ‹¤μ‹κ°„ λ€κΈ°ν™κ²½)
  - κµ¬λ³„ κ°λ³„ API (μ: λ¬Έν™”ν–‰μ‚¬, μ£Όμ°¨μ¥ λ“±)
- **νΉμ§•**: XML μ‘λ‹µ ν•μ‹μ΄ APIλ§λ‹¤ λ‹¤λ¦„
- **μ‚¬μ© λ¨λ“**: "κµ¬ (API)" λ¨λ“

---

### 3. API μ²λ¦¬ νλ¦„

#### μ‚¬μ©μκ°€ μ§€ν‘λ¥Ό μ„ νƒν•λ©΄:

```
1. HierarchicalIndicatorSelector (UI)
   β†“ μ‚¬μ©μ μ„ νƒ

2. loadIndicatorData() (indicator-loader.ts)
   β†“ μ§€ν‘ λ©”νƒ€λ°μ΄ν„° ν™•μΈ

3-A. LOCALDATA ν¨ν„΄μΈ κ²½μ°:
   β†’ /api/localdata-merge?industryCode=010101
   β†’ 25κ° κµ¬ λ°μ΄ν„° ν• λ²μ— κ°€μ Έμ¤κΈ°
   β†’ aggregateByGu()λ΅ κµ¬λ³„ μ§‘κ³„
   β†’ [{ gu: "κ°•λ‚¨κµ¬", value: 122 }, ...]

3-B. MULTI_GU ν¨ν„΄μΈ κ²½μ° (κ°λ³„ API):
   β†’ κ° κµ¬λ³„ API νΈμ¶ (25λ²)
   β†’ κ° μ‘λ‹µμ totalCount μ¶”μ¶
   β†’ [{ gu: "κ°•λ‚¨κµ¬", value: 50 }, ...]

3-C. λ‹¨μΌ APIκ°€ μ „μ²΄ κµ¬ λ°μ΄ν„° λ°ν™ν•λ” κ²½μ°:
   β†’ 1λ² API νΈμ¶
   β†’ rowsμ—μ„ MSRSTN_NM ν•„λ“λ΅ κµ¬ μ΄λ¦„ μ¶”μ¶
   β†’ [{ gu: "κ°•λ‚¨κµ¬", value: 23 }, ...]

4. MapContainer
   β†“ GeoJSONκ³Ό λ³‘ν•©

5. μ§€λ„μ— choropleth ν‘μ‹
```

---

### 4. κ³„μΈµν• κµ¬μ΅° (V3 Hierarchical)

#### λ λ²¨ 1: μ£Όμ  (Topic) - μ•½ 40κ°
```
mapCategory / taskType
μ: "λ³΄κ±΄ > μΈν—κ°€", "ν™κ²½ > μ •λ³΄", "μ‚°μ—…κ²½μ  > μ •λ³΄"
```

#### λ λ²¨ 2: μ„Έλ¶€ μ§€ν‘ (Sub-Indicator) - μλ°± κ°
```
entityType (μ—”ν‹°ν‹° νƒ€μ…)
μ: "λ³‘μ›", "μμ‹μ ", "μ•½κµ­", "κ¶μ—­λ³„"
```

#### μμ‹: λ³‘μ› μΈν—κ°€ μ •λ³΄
```
λ λ²¨1: "λ³΄κ±΄ > μΈν—κ°€"
  β†“ ν΄λ¦­
λ λ²¨2: "μ„μΈμ‹ κ°•λ‚¨κµ¬ λ³‘μ› μΈν—κ°€ μ •λ³΄ (25κ° κµ¬ ν†µν•©)"
  β†“ μ„ νƒ
μ§€λ„μ— κ° κµ¬λ³„ λ³‘μ› κ°μ ν‘μ‹
```

---

### 5. μ£Όμ” μ»΄ν¬λ„νΈ

#### Frontend
- **HierarchicalIndicatorSelector.tsx**: 2λ‹¨κ³„ μ§€ν‘ μ„ νƒ UI
- **MapContainer.tsx**: Mapbox GL + choropleth μ‹κ°ν™”
- **page.tsx**: λ©”μΈ νμ΄μ§€ (λ¨λ“ μ „ν™ λ“±)

#### Backend API Routes
- **app/api/seoul-data/route.ts**: μ„μΈμ‹ OpenAPI ν”„λ΅μ‹ (XML νμ‹± ν¬ν•¨)
- **app/api/localdata-merge/route.ts**: LOCALDATA 25κ° κµ¬ ν†µν•© νΈμ¶
- **app/api/aggregate-gu-data/route.ts**: κµ¬λ³„ λ°μ΄ν„° μ§‘κ³„

#### Utilities
- **utils/indicator-loader.ts**: μ§€ν‘ λ°μ΄ν„° λ΅λ”© λ΅μ§
- **utils/indicator-grouping.ts**: 8,212κ° APIλ¥Ό 40κ° μ£Όμ λ΅ κ·Έλ£Ήν™”
- **utils/api-aggregation.ts**: API μ‘λ‹µ λ³‘ν•© λ° μ§‘κ³„

#### Configuration
- **app/api/seoul-data/known-apis.ts**: νΉμ μ²λ¦¬κ°€ ν•„μ”ν• API λ©λ΅
- **public/data/indicator-catalog.csv**: LOCALDATA CSV μ •μ  λ°μ΄ν„°
- **public/data/seoul-api-catalog.json**: 8,212κ° API λ©”νƒ€λ°μ΄ν„°

---

## π”„ λ°μ΄ν„° μ²λ¦¬ λ°©μ‹ λΉ„κµ

| ν¨ν„΄ | API νΈμ¶ νμ | λ°μ΄ν„° μ¶”μ¶ λ°©μ‹ | μμ‹ |
|------|--------------|----------------|------|
| **LOCALDATA** | 25λ² (λ³‘ν•©λ¨) | `aggregateByGu()` | λ³‘μ›, μμ‹μ , μ•½κµ­ |
| **MULTI_GU** | 25λ² (κ°λ³„) | κ° μ‘λ‹µμ `totalCount` | λ¬Έν™”ν–‰μ‚¬, μ£Όμ°¨μ¥ |
| **Single API** | 1λ² | rowsμ `MSRSTN_NM` ν•„λ“ | μ‹¤μ‹κ°„ λ€κΈ°ν™κ²½ |
| **CSV** | 0λ² (νμΌ μ½κΈ°) | CSV νμ‹± | μ ν†µμ „λ¬Ένλ§¤μ—… |

---

## π“ ν„μ¬ μƒνƒ

### β… μ‘λ™ν•λ” κ²ƒ
1. CSV λ¨λ“ (ν–‰μ •λ™ λ λ²¨ μ •μ  λ°μ΄ν„°)
2. LOCALDATA API (localdata-merge + aggregateByGu)
3. RealtimeCityAir (OA-2219) μ‹¤μ‹κ°„ λ€κΈ°ν™κ²½
4. κ³„μΈµν• μ§€ν‘ μ„ νƒ UI (40κ° μ£Όμ )
5. μλ™ LOCALDATA μ„λΉ„μ¤λ… κµ¬μ„±

### β οΈ μ•λ ¤μ§„ μ μ•½
1. XML μ‘λ‹µ ν•μ‹μ΄ APIλ§λ‹¤ λ‹¤λ¦„ (ν‘μ¤€ν™” λ¶κ°€)
2. μΌλ¶€ APIλ” μ‹¤μ  λ°μ΄ν„°κ°€ μ—†μ (Sheet νƒ€μ…)
3. μ£Όμ† ν•„λ“μ—μ„ κµ¬ μ΄λ¦„ μ¶”μ¶ ν•„μ” (GU ν•„λ“ μ—†λ” κ²½μ°)

---

## π“ λ¬Έμ„ νμΌ κ°€μ΄λ“

### ν”„λ΅μ νΈ μ΄ν•΄
- **PROJECT_OVERVIEW.md** (μ΄ λ¬Έμ„): ν”„λ΅μ νΈ μ „μ²΄ κ°μ”
- **DOCUMENTATION_INDEX.md**: λ¨λ“  λ¬Έμ„ λ©λ΅ λ° μ„¤λ…

### μ•„ν‚¤ν…μ²
- **V3_DELIVERABLES_INDEX.md**: V3 κ³„μΈµν• κµ¬μ΅° μ‚°μ¶λ¬Ό
- **V3_HIERARCHICAL_GROUPING.md**: 40κ° μ£Όμ  κ·Έλ£Ήν•‘ μ „λµ
- **API_AGGREGATION_DESIGN.md**: API λ°μ΄ν„° μ§‘κ³„ μ„¤κ³„

### κΈ°μ  λ¬Έμ„
- **REALTIME_AIR_FINAL_FIX.md**: μ‹¤μ‹κ°„ λ€κΈ°ν™κ²½ μμ • κΈ°λ΅
- **LOCALDATA_PATTERN_FIX.md**: LOCALDATA ν¨ν„΄ κ°μ§€ κµ¬ν„
- **GU_EXTRACTION_FIX.md**: μ£Όμ†μ—μ„ κµ¬ μ΄λ¦„ μ¶”μ¶ μμ •

### μ°Έκ³  μλ£
- **SEOUL_API_ANALYSIS.md**: μ„μΈμ‹ API λ¶„μ„ κ²°κ³Ό
- **dev-docs/seoul-openapi-analysis.md**: API κµ¬μ΅° μƒμ„Έ λ¶„μ„

---

## π€ λ‹¤μ λ‹¨κ³„

### μµμ… 1: ν„μ¬ λ°©μ‹ μ μ§€ (κ¶μ¥)
- LOCALDATAλ” localdata-merge μ‚¬μ©
- λ‹¤λ¥Έ APIλ” κ°λ³„ μ²λ¦¬
- **μ¥μ **: μ μ—°ν•κ³  μ‹¤μ©μ 
- **λ‹¨μ **: λ³µμ΅λ„ λ†’μ

### μµμ… 2: APIλ³„ λ§μ¶¤ μ²λ¦¬
- known-apis.tsμ— λ” λ§μ€ API μ¶”κ°€
- κ° APIμ— λ§λ” νμ‹± λ΅μ§ κµ¬ν„
- **μ¥μ **: μ •ν™•λ„ λ†’μ
- **λ‹¨μ **: μ μ§€λ³΄μ λ¶€λ‹΄ νΌ

### μµμ… 3: μƒν”λ§ λ°©μ‹
- κ° κµ¬λ‹Ή 1κ° APIλ§ νΈμ¶
- μ „μ²΄ κ²½ν–¥μ„± νμ•…μ©
- **μ¥μ **: λΉ λ¦„
- **λ‹¨μ **: μ •ν™•λ„ λ‚®μ

---

## π› οΈ κ°λ° μ‹μ‘ν•κΈ°

### 1. μ„λ²„ μ‹¤ν–‰
```bash
npm run dev
```

### 2. λ΅κ·Έ ν™•μΈ
```bash
tail -f /tmp/nextjs-dev.log
```

### 3. API ν…μ¤νΈ
```bash
# LOCALDATA λ³‘ν•© API
curl "http://localhost:3000/api/localdata-merge?industryCode=010101"

# κ°λ³„ μ„μΈμ‹ API
curl "http://localhost:3000/api/seoul-data?serviceId=OA-2219&startIndex=1&endIndex=25"
```

### 4. λΈλΌμ°μ € μ ‘μ†
```
http://localhost:3000
```

---

**μ‘μ„±μΌ**: 2026-01-12
**λ²„μ „**: 1.0
**λ‹¤μ μ½μ„ λ¬Έμ„**: [DOCUMENTATION_INDEX.md](DOCUMENTATION_INDEX.md)
