# 서울 열린데이터광장 API 데이터 문서

## 📊 전체 데이터 개요

### 데이터 규모
- **총 API 개수**: 8,217개
- **데이터 출처**: 서울 열린데이터광장 (https://data.seoul.go.kr)
- **수집 날짜**: 2025년 1월
- **지도 시각화 가능 API**: 약 7,600개 (필터링 후)

### 공간 해상도 (Spatial Grain)
서울시 OpenAPI는 3가지 공간 단위로 제공됩니다:

1. **시 단위 (City-level)**: 서울시 전체 데이터
   - 예: 서울시 대기오염 측정정보

2. **구 단위 (District-level / Gu)**: 25개 자치구별 데이터
   - 예: 강남구 음식점 현황, 종로구 주차장 정보

3. **행정동 단위 (Neighborhood-level / Dong)**: 467개 행정동별 데이터
   - 예: 사직동 생활인구, 명동 유동인구

---

## 🗂️ 데이터 분류 체계

### 1단계: 대분류 (Map Category)
서울시 OpenAPI는 다음과 같은 대분류로 구분됩니다:

| 대분류 | API 개수 | 설명 |
|--------|----------|------|
| **일반행정** | 533개 | 행정업무, 통계, CCTV, 와이파이 등 |
| **문화관광** | 약 800개 | 문화시설, 관광지, 행사정보 |
| **산업경제** | 약 6,000개 | 지역 업소 정보 (음식점, 병원, 약국 등) |
| **보건** | 약 400개 | 의료기관, 보건소 정보 |
| **복지** | 약 300개 | 복지시설, 어린이집 정보 |
| **교통** | 약 150개 | 주차장, 자전거 대여소 |
| **환경** | 약 34개 | 대기오염, 공원 정보 |

### 2단계: 업무 유형 (Task Type)
각 API는 제공하는 정보의 성격에 따라 분류됩니다:

- **정보 (Information)**: 목록, 현황, 조회 데이터 - 가장 많음
- **인허가 (Licensing)**: 인허가 관련 데이터
- **검사 (Inspection)**: 식품검사, 위생검사 결과
- **처분 (Penalty)**: 행정처분, 과태료 내역

### 3단계: 개체 유형 (Entity Type)
구체적인 데이터 대상을 나타냅니다:

**산업경제 분야 주요 개체**:
- 음식점 (약 1,500개 API) - 일반음식점, 휴게음식점, 주점 등
- 병원 (약 500개 API) - 의원, 치과, 한의원 등
- 약국 (약 130개 API)
- 편의점, 슈퍼마켓 (각 100개 내외)
- 복지시설 (약 400개 API)

**일반행정 분야 주요 개체**:
- 통계/조사 (108개 API)
- CCTV/안심이 (30개 API)
- 와이파이 (27개 API) - 25개 구 + 2개 시 전체
- 생활인구 (17개 API)

---

## ❌ 지도 시각화에서 제외된 데이터

### 제외 기준
다음 유형의 데이터는 **지리적 시각화에 적합하지 않아** 필터링되었습니다:

#### 1. **공지사항 (Announcements)** - 약 250개 제외
- 예시:
  - "서울시 강동구 명일2동 주민센터 새소식 정보"
  - "서울시 중랑구 공지사항 정보"
- 제외 이유: 공지사항은 지리적 분포보다는 시간순 열람이 적합

#### 2. **채용정보 (Job Postings)** - 약 150개 제외
- 예시:
  - "서울시 양천구 육아종합지원센터 채용정보"
  - "서울시 관악구 일자리 정보"
- 제외 이유: 구인/채용 데이터는 지도 시각화 목적과 부합하지 않음

#### 3. **민원 (Complaints)** - 약 100개 제외
- 예시:
  - "서울시 불편신고 접수 내역"
  - "서울시 민원 처리 현황"
- 제외 이유: 민원 데이터는 개인정보 보호 및 지역 비교 부적합

#### 4. **예약 (Reservations)** - 약 120개 제외
- 예시:
  - "서울시 공공서비스예약 정보"
  - "서울시 시설대관 예약 현황"
- 제외 이유: 실시간 예약 상태는 지도 기반 분석에 부적합

**총 제외 API**: 약 620개 (전체의 7.5%)

---

## 📈 데이터 그룹화 로직

### 구별 데이터 그룹화
25개 자치구의 동일한 주제 API는 하나의 지표로 통합됩니다:

**예시 1: 음식점 인허가**
- 개별 API:
  - "서울시 강남구 일반음식점 인허가" (OA-12345)
  - "서울시 종로구 일반음식점 인허가" (OA-12346)
  - ... (총 25개 구)
- 통합 지표: **"음식점 (25개 구 통합)"**
- 지도 표시: 각 구별로 해당 구의 API 데이터를 집계하여 색상으로 표현

**예시 2: 와이파이**
- 구별 API (25개):
  - "서울시 강남구 공공와이파이 서비스 위치 정보"
  - "서울시 종로구 공공와이파이 서비스 위치 정보"
  - ... (25개 구)
- 시 전체 API (2개):
  - "서울시 공공와이파이 서비스 위치 정보"
  - "서울시 공공와이파이 AP별 사용량(2021년)"
- 결과: **2개의 별도 지표** (구별 + 시 전체)

### 최소 임계값 (Threshold)
- 구별 API는 **20개 이상** 모여야 하나의 지표로 생성됩니다
- 20개 미만인 경우 공간 타입을 판단할 수 없어 제외됩니다
- 예외: known-apis.ts에 등록된 API는 개수와 무관하게 처리

---

## 🔍 주요 데이터 주제 예시

### 산업경제 > 정보 > 음식점 (구별 데이터)
- **API 개수**: 25개 (각 구별 1개)
- **공간 단위**: 구 (District)
- **데이터 내용**: 각 구의 일반음식점 인허가 현황
- **집계 방식**: 각 구별 영업 중인 음식점 개수

### 일반행정 > 정보 > 통계 (구별 데이터)
- **API 개수**: 108개
- **공간 단위**: 주로 구 단위
- **데이터 내용**: 서울시 각종 통계조사 결과
- **예시**: SNS 이용률, TV시청 시간, PC보유 가구비율 등

### 일반행정 > 정보 > CCTV (구별 데이터)
- **API 개수**: 30개
- **공간 단위**: 구 (District)
- **데이터 내용**: 안심이 CCTV 설치 및 연계 현황
- **집계 방식**: 각 구별 CCTV 설치 개수

### 일반행정 > 정보 > 생활인구 (행정동 데이터)
- **API 개수**: 17개
- **공간 단위**: 행정동 (Dong)
- **대표 API**: OA-14991 (행정동 단위 서울 생활인구)
- **데이터 특징**:
  - 총 712,396건의 시간대별 데이터
  - 1,000건 샘플링으로 467개 행정동 대표값 추출
  - 단위: 명 (persons)

### 보건 > 정보 > 병원 (구별 데이터)
- **API 개수**: 약 500개
- **공간 단위**: 구 (District)
- **데이터 내용**: 의원, 치과, 한의원, 요양병원 등
- **세부 분류**: 병원 종류별로 별도 지표 생성

---

## 🎯 데이터 품질 및 특징

### 데이터 완정성
- **구별 데이터**: 대부분 25개 구가 모두 제공됨
- **행정동 데이터**: 일부 API만 467개 행정동 전체 커버
- **시 전체 데이터**: 단일 API로 서울시 통합 정보 제공

### 데이터 업데이트 주기
- **실시간 API**: 대기오염, 공공자전거 대여 현황 등
- **일일 업데이트**: 대부분의 인허가 정보
- **정적 데이터**: 통계조사, 시설물 위치 정보 (연 1회 또는 비정기)

### 알려진 제약사항
1. **대용량 데이터**: 생활인구 API는 70만건 이상으로 샘플링 필요
2. **측정소 데이터**: 대기오염 등은 측정소 단위 (25개 구 X 시간)
3. **Sheet 타입 API**: 대부분 API는 엑셀 다운로드 형식으로 실시간 조회 불가
4. **API 키 필요**: 모든 API는 서울 열린데이터광장 인증키 필요

---

## 📝 기술적 구현 세부사항

### Entity Type 추출 알고리즘
```
1순위: 동의어 매칭 (가장 긴 문자열 우선)
   예: "공공와이파이" → "와이파이"
   예: "안심이 CCTV" → "CCTV"

2순위: 정규표현식 패턴
   패턴: "서울시 {구명} {개체} {업무유형}"
   예: "서울시 강남구 음식점 인허가" → "음식점"

3순위: 단어 추출 및 동의어 매핑
   일반 명사 추출 후 동의어 그룹에 매핑
   예: "일반음식점" → "음식점"
```

### 공간 타입 분류 로직
```
Known API (known-apis.ts 등록):
   → spatialType 필드 사용 ('gu', 'dong', 'city', 'none')

Unknown API:
   25개 이상 API → 구별 데이터로 추정
   정규표현식 "서울시 {구명}" 포함 → 구별 데이터
   구명 없음 → 시 전체 데이터
```

### 집계 방식 (Aggregation Method)
- **LOCALDATA 패턴**: 25개 구 API를 병합하여 업소 개수 집계
- **MULTI_GU 패턴**: 각 구 API를 개별 호출하여 집계
- **MULTI_DONG 패턴**: 단일 API에서 행정동 필드로 그룹화
- **CITY 패턴**: 서울시 전체 데이터 (측정소 개수 등)

---

## 🚀 향후 확장 가능성

### 현재 미포함 데이터 (다른 API 소스 필요)
서울 열린데이터광장 외 다른 데이터 소스를 통합하면 추가할 수 있는 데이터:
- **실시간 교통량 데이터** (도로별) - 국가교통정보센터 API
- **날씨 정보** (관측소별) - 기상청 API
- **범죄 통계** (경찰서별) - 경찰청 공공데이터
- **부동산 거래 정보** (법정동별) - 국토교통부 실거래가 API

### 현재 데이터로 개선 가능한 분류
- 더 세밀한 업종 분류 (음식점 → 한식/중식/일식 등)
- 시간대별 데이터 분석 (생활인구, 교통량 등)
- 연도별 추세 분석 (통계 데이터)

---

## 📞 데이터 관련 문의

### 원본 데이터 출처
- 서울 열린데이터광장: https://data.seoul.go.kr
- API 인증키 발급: 상기 웹사이트에서 회원가입 후 신청

### 프로젝트 관련 문의
- 이 문서는 서울시 행정동 인터랙티브 지도 프로젝트의 일부입니다
- 데이터 수집 스크립트: `scripts/collect-seoul-apis.js`
- 데이터 카탈로그: `public/data/seoul-api-catalog.json`
- 데이터 처리 로직: `utils/indicator-grouping.ts`

---

**문서 버전**: 1.0
**최종 업데이트**: 2025-01-13
**총 페이지**: 이메일 첨부용 단일 마크다운 파일
